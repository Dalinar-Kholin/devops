# Stage 1
FROM ubuntu:22.04 AS build
RUN apt-get update && apt-get install -y --no-install-recommends build-essential && rm -rf /var/lib/apt/lists/*

WORKDIR /build
COPY . .
RUN gcc nice.c -o nice

# Stage 2
FROM gcr.io/distroless/cc-debian12 AS final
WORKDIR /app
COPY --from=build /build .
CMD ["./nice"]